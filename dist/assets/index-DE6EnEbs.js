import{j as e,T as s,R as B,B as d,I as H,d as v,M as z,F as M,a as g,s as F,P as h,b as L,a8 as Q,A as q,c as N,f as V,p as _,r as p,ci as $,cj as G,x as U,H as T,y as J,z as K,C as W,E as b}from"./index-CMhOF5Py.js";import{A as X}from"./index-D0iKFXRu.js";import{A as Y,a as P,b as Z}from"./index-D33iASeW.js";import{T as ee}from"./TableHeader-BUzY2eNg.js";import{A as re,T as ne}from"./index-DfXYYow6.js";import{D as se}from"./DialogTitle-B3FJ3JPu.js";import{D as te}from"./DialogContentText-Dg8YmZ7c.js";import"./index-C7AOGOI5.js";import"./TablePagination-BP6S6Tcb.js";const oe=()=>e.jsxs(ee,{children:[e.jsx(s,{children:"Order ID"}),e.jsx(s,{align:"left",children:"Product"}),e.jsx(s,{align:"left",children:"Customer"}),e.jsx(s,{align:"left",children:"Delivery Date"}),e.jsx(s,{align:"left",children:"Price"}),e.jsx(s,{align:"left",children:"Payment Method"}),e.jsx(s,{align:"left",children:"Status"}),e.jsx(s,{align:"right",children:"Actions"})]}),le=({id:r,onDeleteOrder:t})=>{const[n,o]=B.useState(null),x=!!n,u=m=>{o(m.currentTarget)},c=()=>{o(null)};return e.jsxs(d,{children:[e.jsx(H,{"aria-controls":"alpha-menu","aria-haspopup":"true",onClick:u,children:e.jsx(v,{})}),e.jsxs(z,{id:"alpha-menu",anchorEl:n,keepMounted:!0,open:x,onClose:c,TransitionComponent:M,children:[e.jsx(g,{style:{fontSize:14},onClick:c,children:"View Order"}),e.jsx(g,{style:{fontSize:14},onClick:c,children:"Edit"}),e.jsx(g,{style:{fontSize:14},onClick:()=>{t(r)},children:"Delete"})]})]})},a=F(s)(()=>({fontSize:14,padding:8,"&:first-of-type":{paddingLeft:20},"&:last-of-type":{paddingRight:20}})),S=({data:r,onDeleteOrder:t})=>{const n=()=>{switch(r.status){case"Pending":return"#F84E4E";case"Delivered":return"#43C888";default:return"#E2A72E"}};return e.jsxs(L,{className:"item-hover",children:[e.jsx(a,{component:"th",scope:"row",children:e.jsx(d,{sx:{color:"primary.main",borderBottom:o=>`1px solid ${o.palette.primary.main}`,display:"inline-block",cursor:"pointer",textDecoration:"none"},component:Q,to:`/ecommerce/order_detail/${r.id}`,children:r.id})}),e.jsx(a,{align:"left",children:r.product}),e.jsx(a,{align:"left",children:r.customer}),e.jsx(a,{align:"left",children:r.date}),e.jsx(a,{align:"left",children:r.totalAmount}),e.jsx(a,{align:"left",children:r.paymentType}),e.jsx(a,{align:"left",children:e.jsx(d,{sx:{color:n(),backgroundColor:n()+"44",padding:"3px 5px",borderRadius:1,fontSize:14,display:"inline-block"},children:r.orderStatus})}),e.jsx(s,{align:"right",children:e.jsx(le,{id:r.id,onDeleteOrder:t})})]},r.name)};S.propTypes={data:h.object.isRequired,onDeleteOrder:h.func.isRequired};const f=({orderData:r,loading:t,onDeleteOrder:n})=>e.jsx(re,{children:t?e.jsx(q,{}):e.jsxs(N,{stickyHeader:!0,className:"table",children:[e.jsx(ne,{children:e.jsx(oe,{})}),e.jsx(V,{children:r.map(o=>e.jsx(S,{data:o,onDeleteOrder:n},o.id))})]})});f.defaultProps={orderData:[]};f.propTypes={orderData:h.array,loading:h.bool};const ge=()=>{const{messages:r}=_(),[t,n]=p.useState(1),[o,x]=p.useState(""),[u,c]=p.useState(!1),[m,y]=p.useState(null),A=10,{data:l,error:ie,isLoading:C,refetch:O}=$({page:t,limit:A,search:o}),[k]=G(),D=(i,R)=>{n(R)},w=i=>{x(i),n(1)},I=i=>{y(i),c(!0)},j=()=>{c(!1),y(null)},E=async()=>{try{await k(m).unwrap(),O()}catch(i){console.error("Failed to delete the order:",i)}finally{j()}};return C?e.jsx(e.Fragment,{children:"Loading"}):e.jsxs(X,{title:r["eCommerce.recentOrders"],fullView:!0,children:[e.jsx(Y,{children:e.jsxs(d,{display:"flex",flexDirection:"row",alignItems:"center",width:1,justifyContent:"space-between",children:[e.jsx(U,{iconPosition:"right",overlap:!1,onChange:i=>w(i.target.value),placeholder:r["common.searchHere"]}),e.jsx(d,{display:"flex",flexDirection:"row",alignItems:"center",children:e.jsx(T,{smDown:!0,children:e.jsx(P,{rowsPerPage:10,count:l==null?void 0:l.totalResults,page:t,onPageChange:D})})})]})}),e.jsx(Z,{sx:{paddingTop:2.5,paddingBottom:2.5},children:e.jsx(f,{orderData:(l==null?void 0:l.orders)||[],onDeleteOrder:I,loading:C})}),e.jsx(T,{smUp:!0,children:e.jsx(P,{rowsPerPage:10,count:l==null?void 0:l.totalResults,page:t,onPageChange:D})}),e.jsxs(J,{open:u,onClose:j,children:[e.jsx(se,{children:"Confirm"}),e.jsx(K,{children:e.jsx(te,{children:"Confirm Order Item Delete"})}),e.jsxs(W,{children:[e.jsx(b,{onClick:j,color:"primary",children:r["common.cancel"]}),e.jsx(b,{onClick:E,color:"secondary",children:r["common.delete"]})]})]})]})};export{ge as default};
