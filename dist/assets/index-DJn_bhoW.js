import{j as e,T as n,R as B,B as d,I as H,d as v,M as z,F as M,a as j,s as F,P as g,b as L,A as Q,c as N,f as V,p as q,r as p,ci as G,cj as U,x as _,H as b,y as $,z as J,C as K,E as D}from"./index-CMhOF5Py.js";import{A as W}from"./index-D0iKFXRu.js";import{A as X,a as P,b as Y}from"./index-D33iASeW.js";import{T as Z}from"./TableHeader-BUzY2eNg.js";import{A as ee,T as re}from"./index-DfXYYow6.js";import{D as se}from"./DialogTitle-B3FJ3JPu.js";import{D as ne}from"./DialogContentText-Dg8YmZ7c.js";import"./index-C7AOGOI5.js";import"./TablePagination-BP6S6Tcb.js";const te=()=>e.jsxs(Z,{children:[e.jsx(n,{children:"Order ID"}),e.jsx(n,{align:"left",children:"Product"}),e.jsx(n,{align:"left",children:"Customer"}),e.jsx(n,{align:"left",children:"Delivery Date"}),e.jsx(n,{align:"left",children:"Price"}),e.jsx(n,{align:"left",children:"Payment Method"}),e.jsx(n,{align:"left",children:"Status"}),e.jsx(n,{align:"right",children:"Actions"})]}),le=({id:r,onDeleteOrder:t})=>{const[s,l]=B.useState(null),h=!!s,x=u=>{l(u.currentTarget)},c=()=>{l(null)};return e.jsxs(d,{children:[e.jsx(H,{"aria-controls":"alpha-menu","aria-haspopup":"true",onClick:x,children:e.jsx(v,{})}),e.jsxs(z,{id:"alpha-menu",anchorEl:s,keepMounted:!0,open:h,onClose:c,TransitionComponent:M,children:[e.jsx(j,{style:{fontSize:14},onClick:c,children:"View Order"}),e.jsx(j,{style:{fontSize:14},onClick:c,children:"Edit"}),e.jsx(j,{style:{fontSize:14},onClick:()=>{t(r)},children:"Delete"})]})]})},a=F(n)(()=>({fontSize:14,padding:8,"&:first-of-type":{paddingLeft:20},"&:last-of-type":{paddingRight:20}})),S=({data:r,onDeleteOrder:t})=>{const s=()=>{switch(r.status){case"Pending":return"#F84E4E";case"Delivered":return"#43C888";default:return"#E2A72E"}};return e.jsxs(L,{className:"item-hover",children:[e.jsx(a,{component:"th",scope:"row",children:e.jsx(d,{sx:{color:"primary.main",borderBottom:l=>`1px solid ${l.palette.primary.main}`,display:"inline-block"},children:r.id})}),e.jsx(a,{align:"left",children:r.product}),e.jsx(a,{align:"left",children:r.customer}),e.jsx(a,{align:"left",children:r.date}),e.jsx(a,{align:"left",children:r.totalAmount}),e.jsx(a,{align:"left",children:r.paymentType}),e.jsx(a,{align:"left",children:e.jsx(d,{sx:{color:s(),backgroundColor:s()+"44",padding:"3px 5px",borderRadius:1,fontSize:14,display:"inline-block"},children:r.orderStatus})}),e.jsx(n,{align:"right",children:e.jsx(le,{id:r.id,onDeleteOrder:t})})]},r.name)};S.propTypes={data:g.object.isRequired};const f=({orderData:r,loading:t,onDeleteOrder:s})=>e.jsx(ee,{children:t?e.jsx(Q,{}):e.jsxs(N,{stickyHeader:!0,className:"table",children:[e.jsx(re,{children:e.jsx(te,{})}),e.jsx(V,{children:r.map(l=>e.jsx(S,{data:l,onDeleteOrder:s},l.id))})]})});f.defaultProps={orderData:[]};f.propTypes={orderData:g.array,loading:g.bool};const je=()=>{const{messages:r}=q(),[t,s]=p.useState(1),[l,h]=p.useState(""),[x,c]=p.useState(!1),[u,y]=p.useState(null),A=10,{data:o,error:oe,isLoading:C,refetch:O}=G({page:t,limit:A,search:l}),[w]=U(),T=(i,R)=>{s(R)},k=i=>{h(i),s(1)},I=i=>{y(i),c(!0)},m=()=>{c(!1),y(null)},E=async()=>{try{await w(u).unwrap(),O()}catch(i){console.error("Failed to delete the order:",i)}finally{m()}};return C?e.jsx(e.Fragment,{children:"Loading"}):e.jsxs(W,{title:r["eCommerce.recentOrders"],fullView:!0,children:[e.jsx(X,{children:e.jsxs(d,{display:"flex",flexDirection:"row",alignItems:"center",width:1,justifyContent:"space-between",children:[e.jsx(_,{iconPosition:"right",overlap:!1,onChange:i=>k(i.target.value),placeholder:r["common.searchHere"]}),e.jsx(d,{display:"flex",flexDirection:"row",alignItems:"center",children:e.jsx(b,{smDown:!0,children:e.jsx(P,{rowsPerPage:10,count:o==null?void 0:o.totalResults,page:t,onPageChange:T})})})]})}),e.jsx(Y,{sx:{paddingTop:2.5,paddingBottom:2.5},children:e.jsx(f,{orderData:(o==null?void 0:o.orders)||[],onDeleteOrder:I,loading:C})}),e.jsx(b,{smUp:!0,children:e.jsx(P,{rowsPerPage:10,count:o==null?void 0:o.totalResults,page:t,onPageChange:T})}),e.jsxs($,{open:x,onClose:m,children:[e.jsx(se,{children:"Confirm"}),e.jsx(J,{children:e.jsx(ne,{children:"Confirm Order Item Delete"})}),e.jsxs(K,{children:[e.jsx(D,{onClick:m,color:"primary",children:r["common.cancel"]}),e.jsx(D,{onClick:E,color:"secondary",children:r["common.delete"]})]})]})]})};export{je as default};
