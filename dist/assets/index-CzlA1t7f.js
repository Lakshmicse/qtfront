import{P as m,j as e,w as A,G as O,g as S,B as r,o as T,V as R,l as U,O as d,E as L,X as J,r as c,Y as V,n as E,Z as H,u as W,v as G,_ as K,$ as X,h as _}from"./index-CMhOF5Py.js";import{U as Z,P as $,J as q}from"./jodit-react-DjkgfNEC.js";import{p as Q,b as B}from"./APIHooks-DItCotpK.js";import"./lodash-CW1nyizk.js";const tt=[{id:1,name:"Fashion"},{id:2,name:"Hotel"},{id:3,name:"Event"}],I=({selectedTags:t,setSelectedTags:o})=>e.jsx(A,{direction:"left",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:e.jsxs(O,{item:!0,xs:12,lg:4,children:[e.jsxs(S,{title:"Blog Details",children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{value:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),e.jsx(r,{component:"p",children:"Publish"})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(T,{value:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),e.jsx(r,{component:"p",children:"Comments"})]}),e.jsx(R,{multiple:!0,id:"tags-outlined",sx:{width:"100%",my:2},options:tt,autoHighlight:!0,getOptionLabel:n=>n.name,value:t,onChange:(n,a)=>o(a),renderOption:(n,a)=>e.jsx(r,{component:"li",sx:{display:"flex",alignItems:"center"},...n,children:e.jsx(r,{ml:4,children:a==null?void 0:a.name})}),filterSelectedOptions:!0,renderInput:n=>e.jsx(U,{...n,variant:"outlined",label:"Tags",fullWidth:!0})}),e.jsx(d,{name:"metatitle",variant:"outlined",sx:{width:"100%",my:2},label:"Meta Title"}),e.jsx(d,{multiline:!0,name:"metadesc",variant:"outlined",rows:4,sx:{width:"100%",my:2},label:"Meta Description"}),e.jsx(d,{name:"keywords",variant:"outlined",sx:{width:"100%",my:2},label:"Meta Keywords"})]}),e.jsx(L,{sx:{display:"block",minWidth:100,mt:4,ml:"auto"},color:"primary",variant:"contained",type:"submit",children:"Publish"})]})});I.propTypes={selectedTags:m.array,setSelectedTags:m.func};const P=({uploadedFiles:t,setUploadedFiles:o})=>{const n=J({accept:{"image/png":[".png",".jpeg",".jpg"]},onDrop:s=>{o(s.map(p=>Object.assign(p,{preview:URL.createObjectURL(p)})))}});c.useEffect(()=>{o(n.acceptedFiles)},[n.acceptedFiles]);const a=s=>{n.acceptedFiles.splice(n.acceptedFiles.indexOf(s),1),o([...n.acceptedFiles])};return e.jsxs("section",{className:"container",style:{cursor:"pointer"},children:[e.jsx(Z,{uploadText:"Drag n drop some files here, or click to select files",setUploadedFiles:o,dropzone:n}),e.jsx(V,{sx:{maxWidth:500},data:t,column:4,itemPadding:5,renderRow:(s,p)=>e.jsx($,{file:s,onDeleteUploadFile:a},p+s)})]})};P.propTypes={uploadedFiles:m.array,setUploadedFiles:m.func};const et={readonly:!1,toolbar:!0,minHeight:300,maxHeight:500,buttons:["source","|","bold","strikethrough","underline","italic","|","ul","ol","|","outdent","indent","|","font","fontsize","paragraph","|","image","video","table","link","|","align","undo","redo","selectall","cut","copy","|","hr"],uploader:{insertImageAsBase64URI:!0,url:"/api/upload",format:"json",imagesExtensions:["jpg","png","jpeg","gif"],headers:{"X-CSRF-TOKEN":"CSFR-Token",Authorization:"Bearer <JSON Web Token>"},getMessage:function(t){return t.msg},process:function(t){return{files:t.data}}},style:{"& .jodit .jodit-status-bar":{background:"#29572E",color:"rgba(255,255,255,0.5)"}}},Y=({content:t,uploadedFiles:o,setUploadedFiles:n,setFieldValue:a})=>{const s=c.useRef(null);return e.jsx(A,{direction:"right",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:e.jsx(O,{item:!0,xs:12,lg:8,children:e.jsxs(S,{children:[e.jsx(d,{name:"title",variant:"outlined",sx:{width:"100%",my:2},label:"Blog Name"}),e.jsx(r,{component:"p",sx:{mt:3,fontSize:16},children:"Description"}),e.jsx(d,{multiline:!0,name:"description",variant:"outlined",rows:4,sx:{width:"100%",my:2},placeholder:"Description here"}),e.jsx(r,{component:"p",sx:{mt:3,fontSize:16},children:"Content*"}),e.jsx(r,{sx:{width:"100%",my:2},children:e.jsx(q,{ref:s,value:t,placeholder:"Description here",config:et,tabIndex:1,onChange:p=>a("content",p)})}),e.jsx(r,{component:"p",sx:{mt:3,mb:2,fontSize:16},children:"Cover Image"}),e.jsx(P,{uploadedFiles:o,setUploadedFiles:n})]})})})};Y.propTypes={content:m.string,uploadedFiles:m.array,setUploadedFiles:m.func,setFieldValue:m.func};const nt=t=>({id:t.id,blogDetailHeader:[{id:1,icon:"BiUserCircle",title:"John Deuo"},{id:2,icon:"AiOutlineCalendar",title:E().format("DD MMM YYYY")},{id:3,icon:"BiCommentDetail",title:"0 Comments"}],cardMediaAction:"Concept",duration:E().format("DD MMM YYYY"),blogDetailContent:{cardMedia:(t==null?void 0:t.srcImg)||"/assets/images/extra-pages/blog/blog-img.png",content:(t==null?void 0:t.content)||"",title:t.title,description:t.description,meta:{keywords:t.keywords,metadesc:t.metadesc,metatitle:t.metatitle},tag:t.tag,likeCount:0,post:{user:"/assets/images/avatar/A12.jpg",userName:"John Deuo",userPosition:"Co-founder",description:"Lorem ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."}},blogComment:[]}),it=({selectedBlog:t})=>{var g,b,j,f,y,C,D,w,v,k;const o=c.useId(),[n,a]=c.useState([]),[s,p]=c.useState([]),l=H(),h=W();return c.useEffect(()=>{var i,u;t&&(a((i=t==null?void 0:t.blogDetailContent)==null?void 0:i.tag),p([(u=t==null?void 0:t.blogDetailContent)==null?void 0:u.cardMedia]))},[t]),e.jsxs(e.Fragment,{children:[e.jsx(r,{component:"h2",variant:"h2",sx:{fontSize:16,color:"text.primary",fontWeight:G.SEMI_BOLD,mb:{xs:2,lg:4}},children:t?"Edit Blog":"Create a new blog"}),e.jsx(K,{validateOnChange:!0,initialValues:{title:((g=t==null?void 0:t.blogDetailContent)==null?void 0:g.title)||"",description:((b=t==null?void 0:t.blogDetailContent)==null?void 0:b.description)||"",tag:((j=t==null?void 0:t.blogDetailContent)==null?void 0:j.tag)||[],cardMedia:((f=t==null?void 0:t.blogDetailContent)==null?void 0:f.cardMedia)||"",metatitle:((C=(y=t==null?void 0:t.blogDetailContent)==null?void 0:y.meta)==null?void 0:C.metatitle)||"",metadesc:((w=(D=t==null?void 0:t.blogDetailContent)==null?void 0:D.meta)==null?void 0:w.metadesc)||"",keywords:((k=(v=t==null?void 0:t.blogDetailContent)==null?void 0:v.meta)==null?void 0:k.keywords)||""},onSubmit:(i,{setSubmitting:u,resetForm:z})=>{var M,F;if(u(!0),t){const x={...t,blogDetailContent:{...t.blogDetailContent,title:i.title,description:i.description,content:i.content,tag:n,cardMedia:((M=s[0])==null?void 0:M.preview)||t.blogDetailContent.cardMedia,meta:{keywords:i.keywords,metadesc:i.metadesc,metatitle:i.metatitle},post:{user:"/assets/images/avatar/A12.jpg",userName:"John Deuo",userPosition:"Co-founder",description:t.blogDetailContent.post.description}}};Q("/pages/blogs",l,{blog:x}).then(()=>{h("/extra-pages/blog"),l.showMessage("Blog updated successfully!")}).catch(N=>{l.fetchError(N.message)})}else B("/pages/blogs",l,{blog:nt({...i,id:o,content:i.content,srcImg:(F=s[0])==null?void 0:F.preview,tag:n})}).then(()=>{l.showMessage("Blog created successfully!"),h("/extra-pages/blog")}).catch(x=>{l.fetchError(x.message)});u(!1),z()},children:({setFieldValue:i})=>{var u;return e.jsx(X,{noValidate:!0,autoComplete:"off",children:e.jsxs(_,{children:[e.jsx(Y,{content:((u=t==null?void 0:t.blogDetailContent)==null?void 0:u.content)||"",uploadedFiles:s,setUploadedFiles:p,setFieldValue:i}),e.jsx(I,{selectedTags:n,setSelectedTags:a})]})})}})]})};it.propTypes={selectedBlog:m.object};export{it as CreateBlog,it as default};
